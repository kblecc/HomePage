<!doctype html>
<html lang="en" data-bs-theme="dark">
  <head>
    <title>kbleCC</title>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    <link rel="apple-touch-icon" sizes="180x180" href="./favico/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="./favico/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="./favico/favicon-16x16.png" />
    <link rel="manifest" href="./favico/site.webmanifest" />
    <!-- <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/ipad-cursor-js@latest/index.js"
    ></script> -->

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100;0,200;0,900;1,100;1,200;1,800;1,900&display=swap"
      rel="stylesheet"
    />

    <script src="https://unpkg.com/feather-icons"></script>
    <link rel="icon" href="/favicon.ico" />
  </head>
  <body>
    <div id="app"></div>
    <div id="g-pointer-2"></div>
    <div id="g-pointer-1"></div>
    <script type="module" src="/src/main.js"></script>
  </body>

  <script>


    function mouseFollow() {
      const body = document.querySelector('body')
      console.log(window.innerWidth)
      let isHovering = false
      const element = document.getElementById('g-pointer-1')
      const element2 = document.getElementById('g-pointer-2')
      const a = (event) => {
        const target = event.target

        if (target.classList.contains('m-element')) {
          isHovering = true

          const rect = target.getBoundingClientRect()
          const style = window.getComputedStyle(target)

          element2.style.width = `${rect.width + 20}px`
          element2.style.height = `${rect.height + 20}px`
          element2.style.borderRadius = `${style.borderRadius}`
          element2.style.transform = `translate(${rect.left - 10}px, ${rect.top - 10}px)`
          element2.style.opacity = 0
        }
      }
      const b = (event) => {
        const target = event.target
        if (target.classList.contains('m-element')) {
          isHovering = false

          // 样式复原
          element2.style.width = `42px`
          element2.style.height = `42px`
          element2.style.borderRadius = `42px`
          element2.style.opacity = 0.5
        }
      }
      const c = (e) => {
        window.requestAnimationFrame(function () {
          setPosition(e.clientX, e.clientY)
        })
      }
      function setPosition(x, y) {
        console.log('mouse move')
        window.requestAnimationFrame(function () {
          element.style.transform = `translate(${x}px, ${y}px)`

          if (!isHovering) {
            element2.style.transform = `translate(${x}px, ${y}px)`
          }
        })
      }

      if (window.innerWidth >= 991) {
        const halfAlementWidth = element.offsetWidth / 2
        const halfAlementWidth2 = element2.offsetWidth / 2

        // 该变量用于跟踪鼠标是否悬停在具有类名为 .g-animation 的元素上

        // 判断元素是否悬停在具有类名为 .g-animation 的元素上

        window.addEventListener('mouseover', a)

        // 判断元素是否离开在具有类名为 .g-animation 的元素上
        window.addEventListener('mouseout', b)

        // 用于控制两个鼠标指针元素
        body.addEventListener('mousemove', c)
      } else {

        window.removeEventListener('mouseover', a)

        // 判断元素是否离开在具有类名为 .g-animation 的元素上
        window.removeEventListener('mouseout', b)

        // 用于控制两个鼠标指针元素
        body.removeEventListener('mousemove', c)
      }
    }
    mouseFollow()
    window.addEventListener('resize', (event) => { mouseFollow()})

  </script>
  <style>
    body {
      overflow: hidden;
    }
    @media (min-width: 992px) {
      body {
        cursor: none;
      }
      #g-pointer-1,
      #g-pointer-2 {
        position: absolute;
        top: 0;
        left: 0;
        width: 12px;
        height: 12px;
        background: #999;
        border-radius: 12px;
        background-color: #ffaeae;
        z-index: 9999;
        mix-blend-mode: normal;
        pointer-events: none;
      }
      #g-pointer-2 {
        width: 42px;
        height: 42px;
        background: #fff;
        transition: 0.15s ease-out;
        opacity: 0.5;
        border-radius: 42px;
      }
    }
  </style>
</html>
